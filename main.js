(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function e(t){var r=t.baseUrl,n=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=r,this._headers=n}var r,n;return r=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"_request",value:function(e,t){return fetch("".concat(this._baseUrl).concat(e),t).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return this._request("/users/me",{headers:this._headers})}},{key:"getCardsInitial",value:function(){return this._request("/cards",{headers:this._headers})}},{key:"getAppInfo",value:function(){return Promise.all([this.getUserInfo(),this.getCardsInitial()])}},{key:"updateUserInfo",value:function(e){var t=e.name,r=e.about;return this._request("/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})})}},{key:"updateUserAvatar",value:function(e){return this._request("/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}},{key:"addCard",value:function(e){var t=e.name,r=e.link;return this._request("/cards",{method:"POST",headers:this._headers,body:JSON.stringify({link:r,name:t})})}},{key:"deleteCard",value:function(e){return this._request("/cards/".concat(e),{method:"DELETE",headers:this._headers})}},{key:"setLike",value:function(e){return this._request("/cards/".concat(e,"/likes"),{method:"PUT",headers:this._headers})}},{key:"removeLike",value:function(e){return this._request("/cards/".concat(e,"/likes"),{method:"DELETE",headers:this._headers})}}])&&t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}var i=function(){function e(t){var r=t.renderer,n=t.selector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._section=document.querySelector(n)}var t,r;return t=e,(r=[{key:"_clear",value:function(){this._section.innerHTML=""}},{key:"sectionRenderer",value:function(e){var t=this;this._clear(),e.forEach((function(e){return t._renderer(e)}))}},{key:"addRenderedItem",value:function(e){this._section.append(e)}},{key:"addNewItem",value:function(e){this._section.prepend(e)}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var l=function(){function e(t){var r,n,o,i=this,u=t.selector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=function(e){"Escape"===e.key&&i.close()},(n=c(n="_handleEscClose"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._popup=document.querySelector(u)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){t.target===e._popup&&e.close()})),this._popup.querySelector(".popup__button-close").addEventListener("click",(function(){return e.close()}))}}])&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},p.apply(this,arguments)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(o){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,r=e.selector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,{selector:r}))._image=t._popup.querySelector(".popup__card-img"),t._name=t._popup.querySelector(".popup__card-name"),t}return t=u,(r=[{key:"open",value:function(e){this._image.setAttribute("src",e.link),this._image.setAttribute("alt",e.alt),this._name.textContent=e.name,p(d(u.prototype),"open",this).call(this)}}])&&f(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===m(o)?o:String(o)),n)}var o}var b=function(){function e(t){var r=t.dataCard,n=t.cardTemplateSelector,o=t.handlerImgClick,i=t.handlerDeleteClick,u=t.handlerLikeClick,a=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=r.link,this._name=r.name,this._alt=r.name,this._likes=r.likes,this._ownerId=r.owner._id,this.id=r._id,this._cardTemplateSelector=n,this._handlerImgClick=o,this._handlerDeleteClick=i,this._handlerLikeClick=u,this._userId=a}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardTemplateSelector).content.querySelector(".card__container").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._cardElementImg.addEventListener("click",(function(){return e._handlerImgClick(e)})),this._cardElementTrashBin.addEventListener("click",(function(){return e._handlerDeleteClick(e)})),this._cardElementLike.addEventListener("click",(function(){return e._handlerLikeClick(e)}))}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"setLike",value:function(){this._cardElementLike.classList.add("card__like-button_active")}},{key:"removeLike",value:function(){this._cardElementLike.classList.remove("card__like-button_active")}},{key:"countLikes",value:function(e){this._cardElementCount.textContent=e.likes.length,this._likes=e.likes}},{key:"generateCard",value:function(){return this.cardElement=this._getTemplate(),this._cardElementImg=this.cardElement.querySelector(".card__img"),this._cardElementLike=this.cardElement.querySelector(".card__like-button"),this._cardElementCount=this.cardElement.querySelector(".card__liked"),this._cardElementTrashBin=this.cardElement.querySelector(".card__waste-bin"),this._ownerId!==this._userId&&this._cardElementTrashBin.remove(),this.isLiked()&&this.setLike(),this._cardElementImg.setAttribute("src",this._link),this._cardElementImg.setAttribute("alt",this._alt),this.cardElement.querySelector(".card__name").textContent=this._name,this._cardElementCount.textContent=this._likes.length,this._setEventListeners(),this.cardElement}},{key:"deleteCard",value:function(){this.cardElement.remove()}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===_(o)?o:String(o)),n)}var o}var g=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._form=r,this._inputList=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._buttonSave=this._form.querySelector(this._config.saveButtonSelector)}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){this._setEventListener()}},{key:"_setEventListener",value:function(){var e=this;this._form.addEventListener("submit",(function(e){return e.preventDefault()})),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isInputValidity(t),e._toggleButtonState()}))}))}},{key:"_isInputValidity",value:function(e){var t=this._form.querySelector("".concat(this._config.errorTemplateSelector).concat(e.name));e.validity.valid?this._hideInputError(e,t):this._showInputError(e,t)}},{key:"_hideInputError",value:function(e,t){e.classList.remove(this._config.inputErrorClass),t.textContent="",t.classList.remove(this._config.errorClass)}},{key:"_showInputError",value:function(e,t){e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._config.errorClass)}},{key:"_toggleButtonState",value:function(){this._hasInputValid()?this._enableButton():this._disableButton()}},{key:"_hasInputValid",value:function(){return this._inputList.every((function(e){return e.validity.valid}))}},{key:"_enableButton",value:function(){this._buttonSave.classList.remove(this._config.buttonErrorClass),this._buttonSave.disabled=!1}},{key:"_disableButton",value:function(){this._buttonSave.classList.add(this._config.buttonErrorClass),this._buttonSave.disabled=!0}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){var r=e._form.querySelector("".concat(e._config.errorTemplateSelector).concat(t.name));e._hideInputError(t,r)})),this._disableButton()}}])&&S(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===k(o)?o:String(o)),n)}var o}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},w.apply(this,arguments)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(n);if(o){var r=O(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,r=e.selector,n=e.handlerSubmitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,{selector:r}))._form=t._popup.querySelector(".popup__form"),t._inputList=t._form.querySelectorAll(".popup__input"),t._popupButtonSubmit=t._form.querySelector(".popup__button-save"),t._popupButtonSubmitText=t._popupButtonSubmit.textContent,t._handlerSubmitForm=n,t}return t=u,r=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){return e[t.name]=t.value})),e}},{key:"renderLoading",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Сохранение...";this._popupButtonSubmit.textContent=e?t:this._popupButtonSubmitText}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._handlerSubmitForm(e._getInputValues())})),w(O(u.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._form.reset(),w(O(u.prototype),"close",this).call(this)}}],r&&E(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==P(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===P(o)?o:String(o)),n)}var o}var I=function(){function e(t){var r=t.selectorAvatar,n=t.selectorName,o=t.selectorAbout;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userAvatarElement=document.querySelector(r),this._userNameElement=document.querySelector(n),this._userAboutElement=document.querySelector(o)}var t,r;return t=e,(r=[{key:"getUserAvatar",value:function(){return this._userAvatarElement}},{key:"getUserInfo",value:function(){return{name:this._userNameElement.textContent,about:this._userAboutElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,r=e.about,n=e.avatar,o=e._id;this._userNameElement.textContent=t,this._userAboutElement.textContent=r,this._userAvatarElement.src=n,this._userAvatarElement._id=o}}])&&C(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),T=document.querySelector(".user__avatar-wrap"),q=document.querySelector(".user__button-edit"),A=document.querySelector(".user__button-add"),R=document.querySelector("#avatar").querySelector(".popup__form"),B=document.querySelector("#user").querySelector(".popup__form"),x="#card-add",U=document.querySelector(x).querySelector(".popup__form");function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==D(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===D(o)?o:String(o)),n)}var o}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},N.apply(this,arguments)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(n);if(o){var r=H(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,r=e.selector,n=e.handlerSubmitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,{selector:r}))._handleSubmitForm=n,t}return t=u,(r=[{key:"open",value:function(e){this.data=e,N(H(u.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmitForm(e.data)})),N(H(u.prototype),"setEventListeners",this).call(this)}}])&&V(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=new I({selectorAvatar:".user__avatar",selectorName:".user__name",selectorAbout:".user__about"}),$=new L({selector:"#avatar",handlerSubmitForm:function(e){Z((function(){return ne.updateUserAvatar(e.link).then((function(e){return z.setUserInfo(e)}))}),$)}}),G=new L({selector:"#user",handlerSubmitForm:function(e){Z((function(){return ne.updateUserInfo(e).then((function(e){return z.setUserInfo(e)}))}),G)}}),K=new L({selector:x,handlerSubmitForm:function(e){Z((function(){return ne.addCard(e).then((function(e){return X.addNewItem(Y(e))}))}),K)}}),Q=new h({selector:"#card-full-screen"}),W=new J({selector:"#submit",handlerSubmitForm:function(e){ne.deleteCard(e.id).then((function(){e.deleteCard(),W.close()})).catch((function(e){return console.error("Ошибка: ".concat(e))}))}}),X=new i({renderer:function(e){X.addRenderedItem(Y(e))},selector:".card"});function Y(e){var t=new b({dataCard:e,cardTemplateSelector:"#card__template",handlerImgClick:function(){return Q.open(e)},handlerDeleteClick:function(){return W.open(t)},handlerLikeClick:function(){return function(e){e.isLiked()?ne.removeLike(e.id).then((function(t){e.removeLike(),e.countLikes(t)})).catch((function(e){return console.error("Ошибка: ".concat(e))})):ne.setLike(e.id).then((function(t){e.setLike(),e.countLikes(t)})).catch((function(e){return console.error("Ошибка: ".concat(e))}))}(t)},userId:re});return t.generateCard()}function Z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Сохранение...";t.renderLoading(!0,r),e().then((function(){t.close()})).catch((function(e){console.error("Ошибка: ".concat(e))})).finally((function(){t.renderLoading(!1)}))}T.addEventListener("click",(function(){$.open(),te[R.getAttribute("name")].resetValidation()})),q.addEventListener("click",(function(){var e=z.getUserInfo();G.setInputValues(e),G.open(),te[B.getAttribute("name")].resetValidation()})),A.addEventListener("click",(function(){K.open(),te[U.getAttribute("name")].resetValidation()}));var ee,te={};ee={formSelector:".popup__form",inputSelector:".popup__input",saveButtonSelector:".popup__button-save",errorTemplateSelector:".popup__error_type_",buttonErrorClass:"popup__button-save_disable",inputErrorClass:"popup__input_value_uncorrect",errorClass:"popup__error_visible"},Array.from(document.querySelectorAll(ee.formSelector)).forEach((function(e){var t=new g(ee,e),r=e.getAttribute("name");te[r]=t,t.enableValidation()})),$.setEventListeners(),G.setEventListeners(),K.setEventListeners(),Q.setEventListeners(),W.setEventListeners();var re,ne=new r({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-68",headers:{authorization:"4fcc9266-4211-4306-96d7-ded80bf1bc2a","Content-Type":"application/json"}});ne.getAppInfo().then((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];re=o._id,z.setUserInfo({name:o.name,about:o.about,avatar:o.avatar,_id:o._id}),X.sectionRenderer(i)})).catch((function(e){return console.error("Ошибка: ".concat(e))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDaERFLEVBQVdGLEVBQVlOLGFBQWEsUUFFMUNELEdBQWVTLEdBQVlELEVBQzNCQSxFQUFVRSxrQkFDWCxJQUtEekMsRUFBZ0IwQyxvQkFDaEJwQyxFQUFjb0Msb0JBQ2RqQyxFQUFhaUMsb0JBQ2IzQixFQUFlMkIsb0JBQ2YxQixFQUFnQjBCLG9CQUVoQixJQVFJckksR0FSRTZGLEdBQU0sSUFBSWpMLEVBQUksQ0FDbkJFLFFBQVMsOENBQ1RDLFFBQVMsQ0FDUnVOLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBTWxCekMsR0FDRTBDLGFBQ0F2TSxNQUFLLFNBQUFuQixHQUEwQixJLElBQUF5QixHLEVBQUEsRSw0Q0FBQXpCLEksbzJCQUF4QnNMLEVBQVE3SixFQUFBLEdBQUVrTSxFQUFRbE0sRUFBQSxHQUN6QjBELEdBQVNtRyxFQUFTNUYsSUFDbEJtRixFQUFTTSxZQUFZLENBQ3BCekosS0FBTTRKLEVBQVM1SixLQUNmQyxNQUFPMkosRUFBUzNKLE1BQ2hCTSxPQUFRcUosRUFBU3JKLE9BQ2pCeUQsSUFBSzRGLEVBQVM1RixNQUVmZ0csRUFBYWtDLGdCQUFnQkQsRUFDOUIsSUFDQzFCLE9BQU0sU0FBQ0MsR0FBSyxPQUFLQyxRQUFRRCxNQUFNLFdBQURwTCxPQUFZb0wsR0FBUSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFwaSB7XG5cdGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG5cdFx0dGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG5cdFx0dGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG5cdH1cblxuXHRfY2hlY2tSZXNwb25zZShyZXN1bHQpIHtcblx0XHRyZXR1cm4gcmVzdWx0Lm9rXG5cdFx0XHQ/IHJlc3VsdC5qc29uKClcblx0XHRcdDogUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXN1bHQuc3RhdHVzfWApO1xuXHR9XG5cblx0X3JlcXVlc3QoZW5kcG9pbnQsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0ke2VuZHBvaW50fWAsIG9wdGlvbnMpLnRoZW4oXG5cdFx0XHR0aGlzLl9jaGVja1Jlc3BvbnNlXG5cdFx0KTtcblx0fVxuXG5cdGdldFVzZXJJbmZvKCkge1xuXHRcdHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvdXNlcnMvbWVgLCB7XG5cdFx0XHRoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuXHRcdH0pO1xuXHR9XG5cblx0Z2V0Q2FyZHNJbml0aWFsKCkge1xuXHRcdHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvY2FyZHNgLCB7XG5cdFx0XHRoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuXHRcdH0pO1xuXHR9XG5cblx0Z2V0QXBwSW5mbygpIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlckluZm8oKSwgdGhpcy5nZXRDYXJkc0luaXRpYWwoKV0pO1xuXHR9XG5cblx0dXBkYXRlVXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlcXVlc3QoYC91c2Vycy9tZWAsIHtcblx0XHRcdG1ldGhvZDogJ1BBVENIJyxcblx0XHRcdGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG5cdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdG5hbWU6IG5hbWUsXG5cdFx0XHRcdGFib3V0OiBhYm91dCxcblx0XHRcdH0pLFxuXHRcdH0pO1xuXHR9XG5cblx0dXBkYXRlVXNlckF2YXRhcihsaW5rKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlcXVlc3QoYC91c2Vycy9tZS9hdmF0YXJgLCB7XG5cdFx0XHRtZXRob2Q6ICdQQVRDSCcsXG5cdFx0XHRoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRhdmF0YXI6IGxpbmssXG5cdFx0XHR9KSxcblx0XHR9KTtcblx0fVxuXG5cdGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcblx0XHRyZXR1cm4gdGhpcy5fcmVxdWVzdChgL2NhcmRzYCwge1xuXHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRsaW5rOiBsaW5rLFxuXHRcdFx0XHRuYW1lOiBuYW1lLFxuXHRcdFx0fSksXG5cdFx0fSk7XG5cdH1cblxuXHRkZWxldGVDYXJkKGlkKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlcXVlc3QoYC9jYXJkcy8ke2lkfWAsIHtcblx0XHRcdG1ldGhvZDogJ0RFTEVURScsXG5cdFx0XHRoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuXHRcdH0pO1xuXHR9XG5cblx0c2V0TGlrZShpZCkge1xuXHRcdHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG5cdFx0XHRtZXRob2Q6ICdQVVQnLFxuXHRcdFx0aGVhZGVyczogdGhpcy5faGVhZGVycyxcblx0XHR9KTtcblx0fVxuXG5cdHJlbW92ZUxpa2UoaWQpIHtcblx0XHRyZXR1cm4gdGhpcy5fcmVxdWVzdChgL2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuXHRcdFx0bWV0aG9kOiAnREVMRVRFJyxcblx0XHRcdGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG5cdFx0fSk7XG5cdH1cbn1cblxuZXhwb3J0IHsgQXBpIH07IiwiY2xhc3MgU2VjdGlvbiB7XG5cdGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIsIHNlbGVjdG9yIH0pIHtcblx0XHR0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuXHRcdHRoaXMuX3NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcblx0fVxuXG5cdF9jbGVhcigpIHtcblx0XHR0aGlzLl9zZWN0aW9uLmlubmVySFRNTCA9ICcnO1xuXHR9XG5cblx0c2VjdGlvblJlbmRlcmVyKGl0ZW1zKXtcblx0XHR0aGlzLl9jbGVhcigpO1xuXHRcdGl0ZW1zLmZvckVhY2goaXRlbSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG5cdH1cblxuXHRhZGRSZW5kZXJlZEl0ZW0oaXRlbSl7XG5cdFx0dGhpcy5fc2VjdGlvbi5hcHBlbmQoaXRlbSlcblx0fVxuXG5cdGFkZE5ld0l0ZW0oaXRlbSl7XG5cdFx0dGhpcy5fc2VjdGlvbi5wcmVwZW5kKGl0ZW0pXG5cdH1cbn1cblxuZXhwb3J0IHsgU2VjdGlvbiB9IiwiY2xhc3MgUG9wdXAge1xuXHRjb25zdHJ1Y3Rvcih7IHNlbGVjdG9yIH0pIHtcblx0XHR0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuXHR9XG5cblx0X2hhbmRsZUVzY0Nsb3NlID0gKGV2ZW50KSA9PiB7XG5cdFx0aWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHR9XG5cdH07XG5cblx0b3BlbigpIHtcblx0XHR0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuXHR9XG5cblx0Y2xvc2UoKSB7XG5cdFx0dGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcblx0fVxuXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xuXHRcdHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy5fcG9wdXApIHtcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHRoaXMuX3BvcHVwXG5cdFx0XHQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tY2xvc2UnKVxuXHRcdFx0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblx0fVxufVxuXG5leHBvcnQgeyBQb3B1cCB9OyIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcydcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG5cdGNvbnN0cnVjdG9yICh7IHNlbGVjdG9yIH0pIHtcblx0XHRzdXBlcih7IHNlbGVjdG9yIH0pO1xuXHRcdHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXJkLWltZycpO1xuXHRcdHRoaXMuX25hbWUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcmQtbmFtZScpO1xuXHR9XG5cdG9wZW4oaW1nKSB7XG5cdFx0dGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBpbWcubGluayk7XG5cdFx0dGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCBpbWcuYWx0KTtcblx0XHR0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gaW1nLm5hbWU7XG5cdFx0c3VwZXIub3BlbigpXG5cdH1cbn1cblxuZXhwb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSIsImNsYXNzIENhcmQge1xuXHRjb25zdHJ1Y3Rvcih7IGRhdGFDYXJkLCBjYXJkVGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlckltZ0NsaWNrLCBoYW5kbGVyRGVsZXRlQ2xpY2ssIGhhbmRsZXJMaWtlQ2xpY2ssIHVzZXJJZCB9KSB7XG5cdFx0dGhpcy5fbGluayA9IGRhdGFDYXJkLmxpbms7XG5cdFx0dGhpcy5fbmFtZSA9IGRhdGFDYXJkLm5hbWU7XG5cdFx0dGhpcy5fYWx0ID0gZGF0YUNhcmQubmFtZTtcblx0XHR0aGlzLl9saWtlcyA9IGRhdGFDYXJkLmxpa2VzO1xuXHRcdHRoaXMuX293bmVySWQgPSBkYXRhQ2FyZC5vd25lci5faWQ7XG5cdFx0dGhpcy5pZCA9IGRhdGFDYXJkLl9pZDtcblx0XHR0aGlzLl9jYXJkVGVtcGxhdGVTZWxlY3RvciA9IGNhcmRUZW1wbGF0ZVNlbGVjdG9yO1xuXHRcdHRoaXMuX2hhbmRsZXJJbWdDbGljayA9IGhhbmRsZXJJbWdDbGljaztcblx0XHR0aGlzLl9oYW5kbGVyRGVsZXRlQ2xpY2sgPSBoYW5kbGVyRGVsZXRlQ2xpY2s7XG5cdFx0dGhpcy5faGFuZGxlckxpa2VDbGljayA9IGhhbmRsZXJMaWtlQ2xpY2s7XG5cdFx0dGhpcy5fdXNlcklkID0gdXNlcklkO1xuXHR9XG5cblx0X2dldFRlbXBsYXRlKCkge1xuXHRcdGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkVGVtcGxhdGVTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fY29udGFpbmVyJykuY2xvbmVOb2RlKHRydWUpO1xuXG5cdFx0cmV0dXJuIGNhcmRFbGVtZW50O1xuXHR9XG5cblx0X3NldEV2ZW50TGlzdGVuZXJzKCkge1xuXHRcdHRoaXMuX2NhcmRFbGVtZW50SW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVySW1nQ2xpY2sodGhpcykpO1xuXHRcdHRoaXMuX2NhcmRFbGVtZW50VHJhc2hCaW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZXJEZWxldGVDbGljayh0aGlzKSk7XG5cdFx0dGhpcy5fY2FyZEVsZW1lbnRMaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVyTGlrZUNsaWNrKHRoaXMpKTtcblx0fVxuXG5cdGlzTGlrZWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQpO1xuXHR9XG5cblx0c2V0TGlrZSgpIHtcblx0XHR0aGlzLl9jYXJkRWxlbWVudExpa2UuY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcblx0fVxuXG5cdHJlbW92ZUxpa2UoKSB7XG5cdFx0dGhpcy5fY2FyZEVsZW1lbnRMaWtlLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG5cdH1cblxuXHRjb3VudExpa2VzKGRhdGEpIHtcblx0XHR0aGlzLl9jYXJkRWxlbWVudENvdW50LnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG5cdFx0dGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuXHR9XG5cblx0Z2VuZXJhdGVDYXJkKCkge1xuXHRcdHRoaXMuY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXHRcdHRoaXMuX2NhcmRFbGVtZW50SW1nID0gdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltZ1wiKTtcblx0XHR0aGlzLl9jYXJkRWxlbWVudExpa2UgPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG5cdFx0dGhpcy5fY2FyZEVsZW1lbnRDb3VudCA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlZFwiKTtcblx0XHR0aGlzLl9jYXJkRWxlbWVudFRyYXNoQmluID0gdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3dhc3RlLWJpblwiKTtcblx0XHRpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XG5cdFx0XHR0aGlzLl9jYXJkRWxlbWVudFRyYXNoQmluLnJlbW92ZSgpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5pc0xpa2VkKCkpIHtcblx0XHRcdHRoaXMuc2V0TGlrZSgpO1xuXHRcdH1cblxuXHRcdHRoaXMuX2NhcmRFbGVtZW50SW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLl9saW5rKTtcblx0XHR0aGlzLl9jYXJkRWxlbWVudEltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5fYWx0KTtcblx0XHR0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbmFtZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cdFx0dGhpcy5fY2FyZEVsZW1lbnRDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcblxuXHRcdHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cblx0XHRyZXR1cm4gdGhpcy5jYXJkRWxlbWVudDtcblx0fVxuXG5cblx0ZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLmNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9XG59XG5cbmV4cG9ydCB7IENhcmQgfTsiLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcblx0Y29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XG5cdFx0dGhpcy5fY29uZmlnID0gY29uZmlnO1xuXHRcdHRoaXMuX2Zvcm0gPSBmb3JtO1xuXHRcdHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG5cdFx0dGhpcy5fYnV0dG9uU2F2ZSA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc2F2ZUJ1dHRvblNlbGVjdG9yKTtcblx0fVxuXG5cdGVuYWJsZVZhbGlkYXRpb24oKSB7XG5cdFx0dGhpcy5fc2V0RXZlbnRMaXN0ZW5lcigpO1xuXHR9XG5cblx0X3NldEV2ZW50TGlzdGVuZXIoKSB7XG5cdFx0dGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiBldnQucHJldmVudERlZmF1bHQoKSk7XG5cblx0XHR0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoX2lucHV0KSA9PiB7XG5cdFx0XHRfaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuX2lzSW5wdXRWYWxpZGl0eShfaW5wdXQpO1xuXHRcdFx0XHR0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRfaXNJbnB1dFZhbGlkaXR5KF9pbnB1dCkge1xuXHRcdGNvbnN0IF9lcnJvclBsYWNlID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX2NvbmZpZy5lcnJvclRlbXBsYXRlU2VsZWN0b3J9JHtfaW5wdXQubmFtZX1gKTtcblxuXHRcdGlmIChfaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcblx0XHRcdHRoaXMuX2hpZGVJbnB1dEVycm9yKF9pbnB1dCwgX2Vycm9yUGxhY2UpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9zaG93SW5wdXRFcnJvcihfaW5wdXQsIF9lcnJvclBsYWNlKTtcblx0XHR9XG5cdH1cblxuXHRfaGlkZUlucHV0RXJyb3IoX2lucHV0LCBfZXJyb3JQbGFjZSkge1xuXHRcdF9pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuXHRcdF9lcnJvclBsYWNlLnRleHRDb250ZW50ID0gJyc7XG5cdFx0X2Vycm9yUGxhY2UuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG5cdH1cblxuXHRfc2hvd0lucHV0RXJyb3IoX2lucHV0LCBfZXJyb3JQbGFjZSkge1xuXHRcdF9pbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuXHRcdF9lcnJvclBsYWNlLnRleHRDb250ZW50ID0gX2lucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuXHRcdF9lcnJvclBsYWNlLmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuXHR9XG5cblx0X3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuXHRcdGlmICh0aGlzLl9oYXNJbnB1dFZhbGlkKCkpIHtcblx0XHRcdHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG5cdFx0fVxuXHR9XG5cblx0X2hhc0lucHV0VmFsaWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2lucHV0TGlzdC5ldmVyeSgoX2lucHV0KSA9PiBfaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuXHR9XG5cblx0X2VuYWJsZUJ1dHRvbigpIHtcblx0XHR0aGlzLl9idXR0b25TYXZlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmJ1dHRvbkVycm9yQ2xhc3MpO1xuXHRcdHRoaXMuX2J1dHRvblNhdmUuZGlzYWJsZWQgPSBmYWxzZTtcblx0fVxuXG5cdF9kaXNhYmxlQnV0dG9uKCkge1xuXHRcdHRoaXMuX2J1dHRvblNhdmUuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuYnV0dG9uRXJyb3JDbGFzcyk7XG5cdFx0dGhpcy5fYnV0dG9uU2F2ZS5kaXNhYmxlZCA9IHRydWU7XG5cdH1cblxuXHRyZXNldFZhbGlkYXRpb24oKSB7XG5cdFx0dGhpcy5faW5wdXRMaXN0LmZvckVhY2goKF9pbnB1dCkgPT4ge1xuXHRcdFx0Y29uc3QgX2Vycm9yUGxhY2UgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5fY29uZmlnLmVycm9yVGVtcGxhdGVTZWxlY3Rvcn0ke19pbnB1dC5uYW1lfWApO1xuXHRcdFx0dGhpcy5faGlkZUlucHV0RXJyb3IoX2lucHV0LCBfZXJyb3JQbGFjZSk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG5cdH1cbn1cblxuZXhwb3J0IHsgRm9ybVZhbGlkYXRvciB9OyIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG5cdGNvbnN0cnVjdG9yKHsgc2VsZWN0b3IsIGhhbmRsZXJTdWJtaXRGb3JtIH0pIHtcblx0XHRzdXBlcih7IHNlbGVjdG9yIH0pO1xuXG5cdFx0dGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuXHRcdHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xuXHRcdHRoaXMuX3BvcHVwQnV0dG9uU3VibWl0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbi1zYXZlJyk7XG5cdFx0dGhpcy5fcG9wdXBCdXR0b25TdWJtaXRUZXh0ID0gdGhpcy5fcG9wdXBCdXR0b25TdWJtaXQudGV4dENvbnRlbnQ7XG5cdFx0dGhpcy5faGFuZGxlclN1Ym1pdEZvcm0gPSBoYW5kbGVyU3VibWl0Rm9ybTtcblx0fVxuXG5cdF9nZXRJbnB1dFZhbHVlcygpIHtcblx0XHRjb25zdCBkYXRhSW5wdXQgPSB7fTtcblx0XHR0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IChkYXRhSW5wdXRbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSkpO1xuXG5cdFx0cmV0dXJuIGRhdGFJbnB1dDtcblx0fVxuXG5cdHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpIHtcblx0XHRpZiAoaXNMb2FkaW5nKSB7XG5cdFx0XHR0aGlzLl9wb3B1cEJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9wb3B1cEJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IHRoaXMuX3BvcHVwQnV0dG9uU3VibWl0VGV4dDtcblx0XHR9XG5cdH1cblxuXHRzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG5cdFx0dGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG5cdFx0XHRpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG5cdFx0fSk7XG5cdH1cblxuXHRzZXRFdmVudExpc3RlbmVycygpIHtcblx0XHR0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdHRoaXMuX2hhbmRsZXJTdWJtaXRGb3JtKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuXHRcdH0pO1xuXHRcdHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cdH1cblxuXHRjbG9zZSgpIHtcblx0XHR0aGlzLl9mb3JtLnJlc2V0KCk7XG5cblx0XHRzdXBlci5jbG9zZSgpO1xuXHR9XG59XG5cbmV4cG9ydCB7IFBvcHVwV2l0aEZvcm0gfTsiLCJjbGFzcyBVc2VySW5mbyB7XG5cdGNvbnN0cnVjdG9yICh7IHNlbGVjdG9yQXZhdGFyLCBzZWxlY3Rvck5hbWUsIHNlbGVjdG9yQWJvdXQgfSkge1xuXHRcdHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvckF2YXRhcilcblx0XHR0aGlzLl91c2VyTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yTmFtZSk7XG5cdFx0dGhpcy5fdXNlckFib3V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JBYm91dCk7XG5cdH1cblxuXHRnZXRVc2VyQXZhdGFyKCkge1xuXHRcdHJldHVybiB0aGlzLl91c2VyQXZhdGFyRWxlbWVudFxuXHR9XG5cblx0Z2V0VXNlckluZm8oKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcblx0XHRcdGFib3V0OiB0aGlzLl91c2VyQWJvdXRFbGVtZW50LnRleHRDb250ZW50XG5cdFx0fVxuXHR9XG5cblx0c2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyLCBfaWQgfSkge1xuXHRcdHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG5cdFx0dGhpcy5fdXNlckFib3V0RWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xuXHRcdHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhcjtcblx0XHR0aGlzLl91c2VyQXZhdGFyRWxlbWVudC5faWQgPSBfaWQ7XG5cdH1cbn1cblxuZXhwb3J0IHsgVXNlckluZm8gfVxuIiwiZXhwb3J0IHtcblx0Y29uZmlnVmFsaWRhdGlvbixcblx0YXZhdGFyUGFnZVNlbGVjdG9yLFxuXHRhdmF0YXJQYWdlQnV0dG9uT3Blbixcblx0dXNlck5hbWVQYWdlU2VsZWN0b3IsXG5cdHVzZXJBYm91dFBhZ2VTZWxlY3Rvcixcblx0dXNlclBhZ2VCdXR0b25PcGVuLFxuXHRjYXJkQWRkUGFnZUJ1dHRvbk9wZW4sXG5cdHNlY3Rpb25DYXJkc1BhZ2VTZWxlY3Rvcixcblx0Y2FyZFRlbXBsYXRlUGFnZUlkLFxuXHRhdmF0YXJQb3B1cElkLFxuXHRhdmF0YXJQb3B1cEZvcm0sXG5cdHVzZXJQb3B1cElkLFxuXHR1c2VyUG9wdXBGb3JtLFxuXHRjYXJkQWRkUG9wdXBTZWxlY3Rvcixcblx0Y2FyZEFkZFBvcHVwRm9ybSxcblx0Y2FyZExhcmdlUG9wdXBTZWxlY3Rvcixcblx0c3VibWl0UG9wdXBTZWxlY3Rvcixcbn07XG5cbmNvbnN0IGNvbmZpZ1ZhbGlkYXRpb24gPSB7XG5cdGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG5cdGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0Jyxcblx0c2F2ZUJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24tc2F2ZScsXG5cdGVycm9yVGVtcGxhdGVTZWxlY3RvcjogJy5wb3B1cF9fZXJyb3JfdHlwZV8nLFxuXHRidXR0b25FcnJvckNsYXNzOiAncG9wdXBfX2J1dHRvbi1zYXZlX2Rpc2FibGUnLFxuXHRpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdmFsdWVfdW5jb3JyZWN0Jyxcblx0ZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJyxcbn07XG5cblxuY29uc3QgYXZhdGFyUGFnZVNlbGVjdG9yID0gJy51c2VyX19hdmF0YXInO1xuY29uc3QgYXZhdGFyUGFnZUJ1dHRvbk9wZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fYXZhdGFyLXdyYXAnKTtcbmNvbnN0IHVzZXJOYW1lUGFnZVNlbGVjdG9yID0gJy51c2VyX19uYW1lJztcbmNvbnN0IHVzZXJBYm91dFBhZ2VTZWxlY3RvciA9ICcudXNlcl9fYWJvdXQnO1xuY29uc3QgdXNlclBhZ2VCdXR0b25PcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVzZXJfX2J1dHRvbi1lZGl0Jyk7XG5jb25zdCBjYXJkQWRkUGFnZUJ1dHRvbk9wZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fYnV0dG9uLWFkZCcpO1xuY29uc3Qgc2VjdGlvbkNhcmRzUGFnZVNlbGVjdG9yID0gJy5jYXJkJztcbmNvbnN0IGNhcmRUZW1wbGF0ZVBhZ2VJZCA9ICcjY2FyZF9fdGVtcGxhdGUnO1xuY29uc3QgYXZhdGFyUG9wdXBJZCA9ICcjYXZhdGFyJztcbmNvbnN0IGF2YXRhckVkaXRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXInKTtcbmNvbnN0IGF2YXRhclBvcHVwRm9ybSA9IGF2YXRhckVkaXRQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbmNvbnN0IHVzZXJQb3B1cElkID0gJyN1c2VyJztcbmNvbnN0IHVzZXJFZGl0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlcicpO1xuY29uc3QgdXNlclBvcHVwRm9ybSA9IHVzZXJFZGl0UG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG5jb25zdCBjYXJkQWRkUG9wdXBTZWxlY3RvciA9ICcjY2FyZC1hZGQnO1xuY29uc3QgY2FyZEFkZFBvcHVwRm9ybSA9IGRvY3VtZW50XG5cdC5xdWVyeVNlbGVjdG9yKGNhcmRBZGRQb3B1cFNlbGVjdG9yKVxuXHQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG5jb25zdCBjYXJkTGFyZ2VQb3B1cFNlbGVjdG9yID0gJyNjYXJkLWZ1bGwtc2NyZWVuJztcbmNvbnN0IHN1Ym1pdFBvcHVwU2VsZWN0b3IgPSAnI3N1Ym1pdCc7XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xuXG5jbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XG5cdGNvbnN0cnVjdG9yKHsgc2VsZWN0b3IsIGhhbmRsZXJTdWJtaXRGb3JtIH0pIHtcblx0XHRzdXBlcih7IHNlbGVjdG9yIH0pO1xuXG5cdFx0dGhpcy5faGFuZGxlU3VibWl0Rm9ybSA9IGhhbmRsZXJTdWJtaXRGb3JtO1xuXHR9XG5cblx0b3BlbihkYXRhKSB7XG5cdFx0dGhpcy5kYXRhID0gZGF0YTtcblxuXHRcdHN1cGVyLm9wZW4oKTtcblx0fVxuXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xuXHRcdHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0odGhpcy5kYXRhKTtcblx0XHR9KTtcblx0XHRzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXHR9XG59XG5cbmV4cG9ydCB7IFBvcHVwV2l0aFN1Ym1pdCB9O1xuIiwiaW1wb3J0IHsgQXBpIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQge1xyXG5cdGNvbmZpZ1ZhbGlkYXRpb24sXHJcblx0YXZhdGFyUGFnZVNlbGVjdG9yLFxyXG5cdGF2YXRhclBhZ2VCdXR0b25PcGVuLFxyXG5cdHVzZXJOYW1lUGFnZVNlbGVjdG9yLFxyXG5cdHVzZXJBYm91dFBhZ2VTZWxlY3RvcixcclxuXHR1c2VyUGFnZUJ1dHRvbk9wZW4sXHJcblx0Y2FyZEFkZFBhZ2VCdXR0b25PcGVuLFxyXG5cdHNlY3Rpb25DYXJkc1BhZ2VTZWxlY3RvcixcclxuXHRjYXJkVGVtcGxhdGVQYWdlSWQsXHJcblx0YXZhdGFyUG9wdXBJZCxcclxuXHRhdmF0YXJQb3B1cEZvcm0sXHJcblx0dXNlclBvcHVwSWQsXHJcblx0dXNlclBvcHVwRm9ybSxcclxuXHRjYXJkQWRkUG9wdXBTZWxlY3RvcixcclxuXHRjYXJkQWRkUG9wdXBGb3JtLFxyXG5cdGNhcmRMYXJnZVBvcHVwU2VsZWN0b3IsXHJcblx0c3VibWl0UG9wdXBTZWxlY3RvcixcclxufSBmcm9tICcuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhTdWJtaXQgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzJztcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuXHRzZWxlY3RvckF2YXRhcjogYXZhdGFyUGFnZVNlbGVjdG9yLFxyXG5cdHNlbGVjdG9yTmFtZTogdXNlck5hbWVQYWdlU2VsZWN0b3IsXHJcblx0c2VsZWN0b3JBYm91dDogdXNlckFib3V0UGFnZVNlbGVjdG9yLFxyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuXHRzZWxlY3RvcjogYXZhdGFyUG9wdXBJZCxcclxuXHRoYW5kbGVyU3VibWl0Rm9ybTogKGRhdGEpID0+IHtcclxuXHRcdGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xyXG5cdFx0XHRyZXR1cm4gYXBpXHJcblx0XHRcdFx0LnVwZGF0ZVVzZXJBdmF0YXIoZGF0YS5saW5rKVxyXG5cdFx0XHRcdC50aGVuKCh1c2VyQXZhdGFyKSA9PiB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyQXZhdGFyKSk7XHJcblx0XHR9XHJcblx0XHRoYW5kbGVyU3VibWl0KG1ha2VSZXF1ZXN0LCBwb3B1cEVkaXRBdmF0YXIpO1xyXG5cdH0sXHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBFZGl0VXNlciA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuXHRzZWxlY3RvcjogdXNlclBvcHVwSWQsXHJcblx0aGFuZGxlclN1Ym1pdEZvcm06IChkYXRhKSA9PiB7XHJcblx0XHRmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcclxuXHRcdFx0cmV0dXJuIGFwaVxyXG5cdFx0XHRcdC51cGRhdGVVc2VySW5mbyhkYXRhKVxyXG5cdFx0XHRcdC50aGVuKCh1c2VyRGF0YSkgPT4gdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpKTtcclxuXHRcdH1cclxuXHRcdGhhbmRsZXJTdWJtaXQobWFrZVJlcXVlc3QsIHBvcHVwRWRpdFVzZXIpO1xyXG5cdH0sXHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBDYXJkQWRkID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG5cdHNlbGVjdG9yOiBjYXJkQWRkUG9wdXBTZWxlY3RvcixcclxuXHRoYW5kbGVyU3VibWl0Rm9ybTogKGRhdGEpID0+IHtcclxuXHRcdGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xyXG5cdFx0XHRyZXR1cm4gYXBpXHJcblx0XHRcdFx0LmFkZENhcmQoZGF0YSlcclxuXHRcdFx0XHQudGhlbigocmVzKSA9PiBzZWN0aW9uQ2FyZHMuYWRkTmV3SXRlbShjcmVhdGVDYXJkKHJlcykpKTtcclxuXHRcdH1cclxuXHRcdGhhbmRsZXJTdWJtaXQobWFrZVJlcXVlc3QsIHBvcHVwQ2FyZEFkZCk7XHJcblx0fSxcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7IHNlbGVjdG9yOiBjYXJkTGFyZ2VQb3B1cFNlbGVjdG9yIH0pO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoU3VibWl0ID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCh7XHJcblx0c2VsZWN0b3I6IHN1Ym1pdFBvcHVwU2VsZWN0b3IsXHJcblx0aGFuZGxlclN1Ym1pdEZvcm06IChjYXJkKSA9PiB7XHJcblx0XHRhcGlcclxuXHRcdFx0LmRlbGV0ZUNhcmQoY2FyZC5pZClcclxuXHRcdFx0LnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdGNhcmQuZGVsZXRlQ2FyZCgpO1xyXG5cdFx0XHRcdHBvcHVwV2l0aFN1Ym1pdC5jbG9zZSgpO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LA6ICR7ZXJyb3J9YCkpO1xyXG5cdH0sXHJcbn0pO1xyXG5cclxuY29uc3Qgc2VjdGlvbkNhcmRzID0gbmV3IFNlY3Rpb24oe1xyXG5cdHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG5cdFx0c2VjdGlvbkNhcmRzLmFkZFJlbmRlcmVkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcclxuXHR9LFxyXG5cdHNlbGVjdG9yOiBzZWN0aW9uQ2FyZHNQYWdlU2VsZWN0b3IsXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XHJcblx0Y29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcclxuXHRcdGRhdGFDYXJkOiBkYXRhLFxyXG5cdFx0Y2FyZFRlbXBsYXRlU2VsZWN0b3I6IGNhcmRUZW1wbGF0ZVBhZ2VJZCxcclxuXHRcdGhhbmRsZXJJbWdDbGljazogKCkgPT4gcG9wdXBXaXRoSW1hZ2Uub3BlbihkYXRhKSxcclxuXHRcdGhhbmRsZXJEZWxldGVDbGljazogKCkgPT4gcG9wdXBXaXRoU3VibWl0Lm9wZW4oY2FyZCksXHJcblx0XHRoYW5kbGVyTGlrZUNsaWNrOiAoKSA9PiBoYW5kbGVyTGlrZUNsaWNrKGNhcmQpLFxyXG5cdFx0dXNlcklkOiB1c2VySWQsXHJcblx0fSk7XHJcblxyXG5cdHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVyTGlrZUNsaWNrKGNhcmQpIHtcclxuXHRpZiAoY2FyZC5pc0xpa2VkKCkpIHtcclxuXHRcdGFwaVxyXG5cdFx0XHQucmVtb3ZlTGlrZShjYXJkLmlkKVxyXG5cdFx0XHQudGhlbigobGlrZXMpID0+IHtcclxuXHRcdFx0XHRjYXJkLnJlbW92ZUxpa2UoKTtcclxuXHRcdFx0XHRjYXJkLmNvdW50TGlrZXMobGlrZXMpO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LA6ICR7ZXJyb3J9YCkpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRhcGlcclxuXHRcdFx0LnNldExpa2UoY2FyZC5pZClcclxuXHRcdFx0LnRoZW4oKGxpa2VzKSA9PiB7XHJcblx0XHRcdFx0Y2FyZC5zZXRMaWtlKCk7XHJcblx0XHRcdFx0Y2FyZC5jb3VudExpa2VzKGxpa2VzKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwOiAke2Vycm9yfWApKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZXJTdWJtaXQocmVxdWVzdCwgcG9wdXBJbnN0YW5jZSwgbG9hZGluZ1RleHQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKSB7XHJcblx0cG9wdXBJbnN0YW5jZS5yZW5kZXJMb2FkaW5nKHRydWUsIGxvYWRpbmdUZXh0KTtcclxuXHRyZXF1ZXN0KClcclxuXHRcdC50aGVuKCgpID0+IHtcclxuXHRcdFx0cG9wdXBJbnN0YW5jZS5jbG9zZSgpO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwOiAke2Vycm9yfWApO1xyXG5cdFx0fSlcclxuXHRcdC5maW5hbGx5KCgpID0+IHtcclxuXHRcdFx0cG9wdXBJbnN0YW5jZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuXHRcdH0pO1xyXG59XHJcblxyXG5cclxuYXZhdGFyUGFnZUJ1dHRvbk9wZW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0cG9wdXBFZGl0QXZhdGFyLm9wZW4oKTtcclxuXHRmb3JtVmFsaWRhdG9yc1thdmF0YXJQb3B1cEZvcm0uZ2V0QXR0cmlidXRlKCduYW1lJyldLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxudXNlclBhZ2VCdXR0b25PcGVuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGNvbnN0IGN1cnJlbnRVc2VySW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcblx0cG9wdXBFZGl0VXNlci5zZXRJbnB1dFZhbHVlcyhjdXJyZW50VXNlckluZm8pO1xyXG5cdHBvcHVwRWRpdFVzZXIub3BlbigpO1xyXG5cdGZvcm1WYWxpZGF0b3JzW3VzZXJQb3B1cEZvcm0uZ2V0QXR0cmlidXRlKCduYW1lJyldLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuY2FyZEFkZFBhZ2VCdXR0b25PcGVuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdHBvcHVwQ2FyZEFkZC5vcGVuKCk7XHJcblx0Zm9ybVZhbGlkYXRvcnNbY2FyZEFkZFBvcHVwRm9ybS5nZXRBdHRyaWJ1dGUoJ25hbWUnKV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnVmFsaWRhdGlvbikgPT4ge1xyXG5cdGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShcclxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnVmFsaWRhdGlvbi5mb3JtU2VsZWN0b3IpXHJcblx0KTtcclxuXHRmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG5cdFx0Y29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnVmFsaWRhdGlvbiwgZm9ybUVsZW1lbnQpO1xyXG5cdFx0Y29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcclxuXHJcblx0XHRmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcblx0XHR2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihjb25maWdWYWxpZGF0aW9uKTtcclxuXHJcbnBvcHVwRWRpdEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEVkaXRVc2VyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwQ2FyZEFkZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhTdWJtaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG5cdGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTY4JyxcclxuXHRoZWFkZXJzOiB7XHJcblx0XHRhdXRob3JpemF0aW9uOiAnNGZjYzkyNjYtNDIxMS00MzA2LTk2ZDctZGVkODBiZjFiYzJhJyxcclxuXHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0fSxcclxufSk7XHJcblxyXG5sZXQgdXNlcklkO1xyXG5cclxuYXBpXHJcblx0LmdldEFwcEluZm8oKVxyXG5cdC50aGVuKChbdXNlckRhdGEsIGNhcmREYXRhXSkgPT4ge1xyXG5cdFx0dXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG5cdFx0dXNlckluZm8uc2V0VXNlckluZm8oe1xyXG5cdFx0XHRuYW1lOiB1c2VyRGF0YS5uYW1lLFxyXG5cdFx0XHRhYm91dDogdXNlckRhdGEuYWJvdXQsXHJcblx0XHRcdGF2YXRhcjogdXNlckRhdGEuYXZhdGFyLFxyXG5cdFx0XHRfaWQ6IHVzZXJEYXRhLl9pZCxcclxuXHRcdH0pO1xyXG5cdFx0c2VjdGlvbkNhcmRzLnNlY3Rpb25SZW5kZXJlcihjYXJkRGF0YSk7XHJcblx0fSlcclxuXHQuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LA6ICR7ZXJyb3J9YCkpO1xyXG4iXSwibmFtZXMiOlsiQXBpIiwiX3JlZiIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJrZXkiLCJ2YWx1ZSIsInJlc3VsdCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJjb25jYXQiLCJzdGF0dXMiLCJlbmRwb2ludCIsIm9wdGlvbnMiLCJmZXRjaCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsIl9yZXF1ZXN0IiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRDYXJkc0luaXRpYWwiLCJfcmVmMiIsIm5hbWUiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibGluayIsImF2YXRhciIsIl9yZWYzIiwiaWQiLCJTZWN0aW9uIiwicmVuZGVyZXIiLCJzZWxlY3RvciIsIl9yZW5kZXJlciIsIl9zZWN0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwiaXRlbXMiLCJfdGhpcyIsIl9jbGVhciIsImZvckVhY2giLCJpdGVtIiwiYXBwZW5kIiwicHJlcGVuZCIsIlBvcHVwIiwiZXZlbnQiLCJjbG9zZSIsIl9wb3B1cCIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX3RoaXMyIiwidGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX2ltYWdlIiwiX25hbWUiLCJpbWciLCJzZXRBdHRyaWJ1dGUiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJDYXJkIiwiZGF0YUNhcmQiLCJjYXJkVGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZXJJbWdDbGljayIsImhhbmRsZXJEZWxldGVDbGljayIsImhhbmRsZXJMaWtlQ2xpY2siLCJ1c2VySWQiLCJfbGluayIsIl9hbHQiLCJfbGlrZXMiLCJsaWtlcyIsIl9vd25lcklkIiwib3duZXIiLCJfaWQiLCJfY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlckltZ0NsaWNrIiwiX2hhbmRsZXJEZWxldGVDbGljayIsIl9oYW5kbGVyTGlrZUNsaWNrIiwiX3VzZXJJZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZEVsZW1lbnRJbWciLCJfY2FyZEVsZW1lbnRUcmFzaEJpbiIsIl9jYXJkRWxlbWVudExpa2UiLCJzb21lIiwiZGF0YSIsIl9jYXJkRWxlbWVudENvdW50IiwibGVuZ3RoIiwiY2FyZEVsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJpc0xpa2VkIiwic2V0TGlrZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwiX2NvbmZpZyIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvblNhdmUiLCJzYXZlQnV0dG9uU2VsZWN0b3IiLCJfc2V0RXZlbnRMaXN0ZW5lciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX2lucHV0IiwiX2lzSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9lcnJvclBsYWNlIiwiZXJyb3JUZW1wbGF0ZVNlbGVjdG9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnB1dFZhbGlkIiwiX2VuYWJsZUJ1dHRvbiIsIl9kaXNhYmxlQnV0dG9uIiwiZXZlcnkiLCJidXR0b25FcnJvckNsYXNzIiwiZGlzYWJsZWQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlclN1Ym1pdEZvcm0iLCJfcG9wdXBCdXR0b25TdWJtaXQiLCJfcG9wdXBCdXR0b25TdWJtaXRUZXh0IiwiX2hhbmRsZXJTdWJtaXRGb3JtIiwiZGF0YUlucHV0IiwiaW5wdXQiLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJzZWxlY3RvckF2YXRhciIsInNlbGVjdG9yTmFtZSIsInNlbGVjdG9yQWJvdXQiLCJfdXNlckF2YXRhckVsZW1lbnQiLCJfdXNlck5hbWVFbGVtZW50IiwiX3VzZXJBYm91dEVsZW1lbnQiLCJzcmMiLCJhdmF0YXJQYWdlQnV0dG9uT3BlbiIsInVzZXJQYWdlQnV0dG9uT3BlbiIsImNhcmRBZGRQYWdlQnV0dG9uT3BlbiIsImF2YXRhclBvcHVwRm9ybSIsInVzZXJQb3B1cEZvcm0iLCJjYXJkQWRkUG9wdXBTZWxlY3RvciIsImNhcmRBZGRQb3B1cEZvcm0iLCJQb3B1cFdpdGhTdWJtaXQiLCJfaGFuZGxlU3VibWl0Rm9ybSIsInVzZXJJbmZvIiwicG9wdXBFZGl0QXZhdGFyIiwiaGFuZGxlclN1Ym1pdCIsImFwaSIsInVwZGF0ZVVzZXJBdmF0YXIiLCJ1c2VyQXZhdGFyIiwic2V0VXNlckluZm8iLCJwb3B1cEVkaXRVc2VyIiwidXBkYXRlVXNlckluZm8iLCJ1c2VyRGF0YSIsInBvcHVwQ2FyZEFkZCIsImFkZENhcmQiLCJyZXMiLCJzZWN0aW9uQ2FyZHMiLCJhZGROZXdJdGVtIiwiY3JlYXRlQ2FyZCIsInBvcHVwV2l0aEltYWdlIiwicG9wdXBXaXRoU3VibWl0IiwiY2FyZCIsImRlbGV0ZUNhcmQiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImFkZFJlbmRlcmVkSXRlbSIsIm9wZW4iLCJyZW1vdmVMaWtlIiwiY291bnRMaWtlcyIsImdlbmVyYXRlQ2FyZCIsInJlcXVlc3QiLCJwb3B1cEluc3RhbmNlIiwicmVuZGVyTG9hZGluZyIsImZpbmFsbHkiLCJmb3JtVmFsaWRhdG9ycyIsImdldEF0dHJpYnV0ZSIsInJlc2V0VmFsaWRhdGlvbiIsImN1cnJlbnRVc2VySW5mbyIsInNldElucHV0VmFsdWVzIiwiY29uZmlnVmFsaWRhdGlvbiIsImZvcm1TZWxlY3RvciIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJlbmFibGVWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhdXRob3JpemF0aW9uIiwiZ2V0QXBwSW5mbyIsImNhcmREYXRhIiwic2VjdGlvblJlbmRlcmVyIl0sInNvdXJjZVJvb3QiOiIifQ==